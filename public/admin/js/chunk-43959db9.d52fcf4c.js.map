{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/views/configs/components/TypeInput.vue","webpack:///src/views/configs/components/TypeInput.vue","webpack:///./src/views/configs/components/TypeInput.vue?bcd0","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./src/components/LzForm/FilePicker.vue?5b64","webpack:///src/components/LzForm/FilePicker.vue","webpack:///./src/components/LzForm/FilePicker.vue?4a62","webpack:///./src/components/LzForm/FilePicker.vue","webpack:///./src/views/configs/ConfigValuesForm.vue?be11","webpack:///./src/views/configs/components/ConfigsForm.vue?370e","webpack:///src/views/configs/components/ConfigsForm.vue","webpack:///./src/views/configs/components/ConfigsForm.vue?3821","webpack:///./src/views/configs/components/ConfigsForm.vue","webpack:///src/views/configs/ConfigValuesForm.vue","webpack:///./src/views/configs/ConfigValuesForm.vue?138c","webpack:///./src/views/configs/ConfigValuesForm.vue","webpack:///./src/components/LzForm/FilePicker.vue?e0bc","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/components/LzForm/FilePicker.vue?36dd"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","staticRenderFns","name","components","FilePicker","data","filePickerKey","props","type","String","options","computed","selectOptions","pairs","forEach","label","methods","onInput","this","$emit","val","initValue","CONFIG_TYPES","FILE","max","indexOf","updateFilePicker","watch","handler","immediate","slice","newVal","render","attrs","on","TYPES","INPUT","OTHER","component","vModelEventKey","TEXTAREA","renderData","assign","ext","multiple","key","SINGLE_SELECT","MULTIPLE_SELECT","$","$trim","trim","forcedStringTrimMethod","target","proto","forced","_vm","_h","$createElement","_c","_self","staticClass","_l","item","$event","stopPropagation","onReplace","remove","directives","rawName","isMax","expression","onPick","pickerIcon","title","model","callback","$$v","dialog","ref","mediaMultiple","scopedSlots","_u","fn","media","anySelected","onPickConfirm","selected","_v","LzPopconfirm","FilePreview","SystemMedia","inject","lzFormItem","default","formattedValue","pickIndex","Boolean","Number","valueFields","flatValue","canPick","isReplace","miniWidth","$store","state","arrayValue","map","formatReturn","$refs","clearSelected","fields","splice","index","getData","onSubmit","errors","form","cache","proxy","id","slug","desc","$set","TypeInput","LzForm","LzFormItem","configs","category","$route","params","categorySlug","localStorage","setItem","PageContent","ConfigsForm","fails","whitespaces","non","module","exports","METHOD_NAME"],"mappings":"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","file":"js/chunk-43959db9.d52fcf4c.js","sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","var render, staticRenderFns\nimport script from \"./TypeInput.vue?vue&type=script&lang=js&\"\nexport * from \"./TypeInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { mapConstants } from '@/libs/constants'\nimport FilePicker from '@c/LzForm/FilePicker'\nimport _debounce from 'lodash/debounce'\n\nexport default {\n  name: 'TypeInput',\n  components: {\n    FilePicker,\n  },\n  data() {\n    return {\n      filePickerKey: 1,\n    }\n  },\n  props: {\n    type: String,\n    value: null,\n    options: Object,\n  },\n  computed: {\n    ...mapConstants(['CONFIG_TYPES']),\n    selectOptions() {\n      if (\n        (this.type !== this.CONFIG_TYPES.SINGLE_SELECT) &&\n        (this.type !== this.CONFIG_TYPES.MULTIPLE_SELECT)\n      ) {\n        return []\n      } else {\n        const pairs = this.options.options.split('\\n')\n        const options = []\n        pairs.forEach((pair) => {\n          const [value, label] = pair.split('=>').map((i) => i.trim())\n          if (label) {\n            options.push({ value, label })\n          }\n        })\n        return options\n      }\n    },\n  },\n  methods: {\n    onInput(val) {\n      this.$emit('input', val)\n    },\n    /**\n     * 当类型或者文件选择最大限制改变时，要改变值的类型\n     */\n    initValue() {\n      if (this.type === this.CONFIG_TYPES.FILE) {\n        if (this.options.max > 1 && !Array.isArray(this.value)) {\n          // 如果是多选，且原来的值不是数组，则用数组包起来，空值则为空数组\n          this.onInput(this.value ? [this.value] : [])\n        } else if (this.options.max <= 1 && Array.isArray(this.value)) {\n          // 如果是单选，且原来的值是数组，则选第一个，否则为 null\n          this.onInput(this.value[0] || null)\n        }\n      } else if (this.type === this.CONFIG_TYPES.MULTIPLE_SELECT) {\n        !Array.isArray(this.value) && this.onInput([])\n      } else {\n        if (['string', 'boolean', 'number'].indexOf(typeof this.value) === -1) {\n          this.onInput(null)\n        }\n      }\n    },\n    /**\n     * 重新渲染 FilePicker 组件\n     */\n    updateFilePicker: _debounce(function () {\n      this.filePickerKey++\n    }, 500),\n  },\n  watch: {\n    type: {\n      handler() {\n        this.initValue()\n      },\n      immediate: true,\n    },\n    'options.max'(newVal, oldVal) {\n      // 如果变了之后，都还是多选，则不用更新\n      // 这里条件取反\n      if (!((newVal > 1) && (oldVal > 1))) {\n        this.updateFilePicker()\n      }\n      this.initValue()\n      // 多选时，如果数量变少了，则要去掉 value 中多出来的文件\n      if ((newVal > 1) && (newVal < oldVal)) {\n        this.onInput(this.value.slice(0, newVal))\n      }\n    },\n    'options.ext'() {\n      this.updateFilePicker()\n    },\n  },\n  render(h) {\n    const renderData = {\n      attrs: {\n        value: this.value,\n      },\n      on: {},\n    }\n\n    // v-model 的 event 的 key\n    let vModelEventKey\n    let component = null\n    let slots = null\n\n    const TYPES = this.CONFIG_TYPES\n\n    switch (this.type) {\n      case TYPES.INPUT:\n      case TYPES.OTHER:\n        component = 'a-input'\n        vModelEventKey = 'change.value'\n        break\n      case TYPES.TEXTAREA:\n        component = 'a-input'\n        vModelEventKey = 'change.value'\n        renderData.attrs.type = 'textarea'\n        break\n      case TYPES.FILE:\n        component = 'file-picker'\n        vModelEventKey = 'input'\n        Object.assign(renderData.attrs, {\n          max: this.options.max,\n          ext: this.options.ext,\n          multiple: this.options.max > 1,\n        })\n        // 修改文件选择的配置时，通过更新 key，使重新渲染文件选择器，这样比较省事\n        // 每次修改配置，使 key 加 1，并做 防抖处理\n        renderData.key = this.filePickerKey\n        break\n      case TYPES.SINGLE_SELECT:\n      case TYPES.MULTIPLE_SELECT: {\n        const isMultiple = this.type === TYPES.MULTIPLE_SELECT\n        if (this.options.type === 'input') {\n          component = isMultiple\n            ? 'a-checkbox-group'\n            : 'a-radio-group'\n          vModelEventKey = 'input'\n          const optionComponent = isMultiple\n            ? 'a-checkbox'\n            : 'a-radio'\n          slots = this.selectOptions.map((i) => (\n            <optionComponent key={i.value} value={i.value}>{i.label}</optionComponent>\n          ))\n        } else if (this.options.type === 'select') {\n          component = 'a-select'\n          vModelEventKey = 'change'\n          Object.assign(renderData.attrs, {\n            mode: isMultiple ? 'multiple' : 'default',\n            allowClear: isMultiple,\n          })\n          slots = this.selectOptions.map((i) => (\n            <a-select-option key={i.value} value={i.value}>{i.label}</a-select-option>\n          ))\n        }\n        break\n      }\n      default:\n      // do nothing\n    }\n\n    renderData.on[vModelEventKey] = this.onInput\n\n    return <component {...renderData}>{slots}</component>\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeInput.vue?vue&type=script&lang=js&\"","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"file-picker\"},[_c('div',{staticClass:\"file-wrapper\"},[_vm._l((_vm.arrayValue),function(item,i){return _c('file-preview',{key:i,staticClass:\"preview file-item\",attrs:{\"file\":item}},[_c('a-icon',{staticClass:\"replace\",attrs:{\"type\":\"sync\",\"title\":\"替换\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onReplace(i)}}}),_c('lz-popconfirm',{attrs:{\"title\":\"确认移除？\",\"confirm\":function () { return _vm.remove(i); }}},[_c('a-icon',{staticClass:\"remove\",attrs:{\"type\":\"delete\",\"title\":\"移除\"}})],1)],1)}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isMax),expression:\"!isMax\"}],staticClass:\"picker file-item flex-box\",on:{\"click\":_vm.onPick}},[_c('svg-icon',{staticClass:\"file-icon\",attrs:{\"icon-class\":_vm.pickerIcon}})],1)],2),_c('a-modal',{attrs:{\"title\":_vm.title,\"width\":\"90%\",\"footer\":null,\"wrap-class-name\":\"system-media-dialog\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('system-media',{ref:\"media\",attrs:{\"default-multiple\":_vm.mediaMultiple,\"default-ext\":_vm.ext},scopedSlots:_vm._u([{key:\"actions\",fn:function(media){return [_c('a-button',{attrs:{\"type\":\"primary\",\"disabled\":!media.anySelected},on:{\"click\":function($event){return _vm.onPickConfirm(media.selected)}}},[_vm._v(\" 选定 \")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"file-picker\">\n    <div class=\"file-wrapper\">\n      <file-preview\n        class=\"preview file-item\"\n        v-for=\"(item, i) of arrayValue\"\n        :key=\"i\"\n        :file=\"item\"\n      >\n        <a-icon\n          class=\"replace\"\n          type=\"sync\"\n          title=\"替换\"\n          @click.stop=\"onReplace(i)\"\n        />\n        <lz-popconfirm title=\"确认移除？\" :confirm=\"() => remove(i)\">\n          <a-icon\n            class=\"remove\"\n            type=\"delete\"\n            title=\"移除\"\n          />\n        </lz-popconfirm>\n      </file-preview>\n\n      <div\n        v-show=\"!isMax\"\n        class=\"picker file-item flex-box\"\n        @click=\"onPick\"\n      >\n        <svg-icon class=\"file-icon\" :icon-class=\"pickerIcon\"/>\n      </div>\n    </div>\n\n    <a-modal\n      :title=\"title\"\n      v-model=\"dialog\"\n      width=\"90%\"\n      :footer=\"null\"\n      wrap-class-name=\"system-media-dialog\"\n    >\n      <system-media\n        ref=\"media\"\n        :default-multiple=\"mediaMultiple\"\n        :default-ext=\"ext\"\n      >\n        <template #actions=\"media\">\n          <a-button\n            type=\"primary\"\n            :disabled=\"!media.anySelected\"\n            @click=\"onPickConfirm(media.selected)\"\n          >\n            选定\n          </a-button>\n        </template>\n      </system-media>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport SystemMedia from '@c/SystemMedia/index'\nimport FilePreview from '@c/FilePreview'\nimport _pick from 'lodash/pick'\nimport LzPopconfirm from '@c/LzPopconfirm'\n\nexport default {\n  name: 'FilePicker',\n  components: {\n    LzPopconfirm,\n    FilePreview,\n    SystemMedia,\n  },\n  inject: {\n    lzFormItem: {\n      default: null,\n    },\n  },\n  data() {\n    return {\n      dialog: false,\n      formattedValue: null,\n      pickIndex: -1,\n    }\n  },\n  props: {\n    /**\n     * 多选\n     */\n    multiple: Boolean,\n    /**\n     * 最多选多少个\n     */\n    max: {\n      type: [String, Number],\n      default: 8,\n    },\n    /**\n     * 选择器弹框的标题，默认为 FormItem 的 label 属性\n     */\n    title: {\n      type: String,\n      default() {\n        return this.lzFormItem?.label || '选择文件'\n      },\n    },\n    value: null,\n    /**\n     * 类型筛选，强制限制上传和选择\n     */\n    ext: String,\n    /**\n     * 返回的数据对象中，只包含指定字段，path 字段会自动包含\n     * 不传则包含所有字段\n     */\n    valueFields: {\n      type: String,\n      default: 'path',\n    },\n    /**\n     * 在 valueFields 只返回一个字段时，是否直接返回该字段值，而非对象\n     */\n    flatValue: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  computed: {\n    pickerIcon() {\n      return this.multiple ? 'multi-file' : 'single-file'\n    },\n    canPick() {\n      // 没有达到最大可选数，或者是替换文件的情况下，可以打开文件选择器\n      return !this.isMax || this.isReplace\n    },\n    isMax() {\n      return (this.multiple && this.value.length >= this.max) ||\n        (!this.multiple && this.value)\n    },\n    /**\n     * 是否是处于替换文件的情况\n     */\n    isReplace() {\n      return this.pickIndex !== -1\n    },\n    miniWidth() {\n      return this.$store.state.miniWidth\n    },\n    arrayValue() {\n      if (!this.value) {\n        return []\n      }\n\n      return Array.isArray(this.value) ? this.value : [this.value]\n    },\n    mediaMultiple() {\n      // 替换的情况下，只能单选\n      return this.isReplace ? false : this.multiple\n    },\n  },\n  methods: {\n    onPick() {\n      if (!this.canPick) {\n        return\n      }\n\n      this.dialog = true\n    },\n    onPickConfirm(selected) {\n      selected = selected.map(this.formatReturn)\n      let value\n      // 复制并格式化 selected 中的对象的值\n      if (this.multiple) {\n        if (this.isReplace) {\n          value = this.value\n          value[this.pickIndex] = selected[0]\n        } else {\n          value = this\n            .value\n            .concat(selected.slice(0, this.max - this.value.length))\n        }\n      } else {\n        value = selected[0]\n      }\n\n      this.$emit('input', value)\n      this.$refs.media.clearSelected()\n      this.dialog = false\n    },\n    /**\n     * 根据 valueFields 和 flatValue 格式化返回值\n     */\n    formatReturn(value) {\n      let fields = this.valueFields ? this.valueFields.split(',') : []\n      if (fields.length === 0) { // 返回字段为空，返回所有字段\n        value = { ...value }\n      } else { // 否则返回指定字段\n        // 默认自动包含 path 字段\n        fields.push('path')\n        value = _pick(value, fields)\n      }\n\n      // 去重\n      fields = [...new Set(fields)]\n      // 在只有一个字段时，如果需要平铺，则只返回该字段的值\n      if (this.flatValue && fields.length === 1) {\n        return value[fields[0]]\n      } else {\n        return value\n      }\n    },\n    remove(index) {\n      if (this.multiple) {\n        this.value.splice(index, 1)\n      } else {\n        this.$emit('input', null)\n      }\n    },\n    onReplace(index) {\n      this.pickIndex = index\n      this.onPick()\n    },\n  },\n  watch: {\n    dialog(newVal) {\n      if (!newVal) {\n        this.pickIndex = -1\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"~@/styles/vars\";\n\n.file-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.picker {\n  cursor: pointer;\n}\n\n.file-item {\n  width: 100px;\n  height: 100px;\n  min-width: 100px;\n  min-height: 100px;\n  border: @border-base;\n  border-radius: @border-radius-base;\n  color: @border-color-base;\n  margin: 0 5px 5px 0;\n  transition: all .3s;\n\n  &:hover {\n    border-color: @input-hover-border-color;\n    color: @info-color;\n  }\n\n  .file-icon {\n    width: 50px;\n    height: 50px;\n  }\n}\n\n.remove {\n  color: @error-color;\n}\n\n.replace {\n  color: @primary-color;\n}\n</style>\n\n<style lang=\"less\">\n.system-media-dialog {\n  .ant-modal {\n    max-width: 848px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FilePicker.vue?vue&type=template&id=03e2356c&scoped=true&\"\nimport script from \"./FilePicker.vue?vue&type=script&lang=js&\"\nexport * from \"./FilePicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FilePicker.vue?vue&type=style&index=0&id=03e2356c&scoped=true&lang=less&\"\nimport style1 from \"./FilePicker.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03e2356c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page-content',{attrs:{\"center\":\"\"}},[_c('configs-form')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('lz-form',{ref:\"form\",attrs:{\"get-data\":_vm.getData,\"submit\":_vm.onSubmit,\"errors\":_vm.errors,\"form\":_vm.form,\"disable-stay\":\"\",\"disable-redirect\":\"\",\"edit-mode\":\"\"},on:{\"update:errors\":function($event){_vm.errors=$event},\"update:form\":function($event){_vm.form=$event}},scopedSlots:_vm._u([{key:\"footer-append\",fn:function(){return [_c('a-checkbox',{model:{value:(_vm.cache),callback:function ($$v) {_vm.cache=$$v},expression:\"cache\"}},[_vm._v(\"更新缓存\")])]},proxy:true}])},_vm._l((_vm.configs),function(i){return _c('lz-form-item',{key:i.id,attrs:{\"prop\":i.slug,\"label\":i.name,\"tip\":i.desc}},[_c('type-input',{attrs:{\"type\":i.type,\"options\":i.options},model:{value:(_vm.form[i.slug]),callback:function ($$v) {_vm.$set(_vm.form, i.slug, $$v)},expression:\"form[i.slug]\"}})],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <lz-form\n    ref=\"form\"\n    :get-data=\"getData\"\n    :submit=\"onSubmit\"\n    :errors.sync=\"errors\"\n    :form.sync=\"form\"\n    disable-stay\n    disable-redirect\n    edit-mode\n  >\n    <lz-form-item\n      v-for=\"i of configs\"\n      :key=\"i.id\"\n      :prop=\"i.slug\"\n      :label=\"i.name\"\n      :tip=\"i.desc\"\n    >\n      <type-input\n        v-model=\"form[i.slug]\"\n        :type=\"i.type\"\n        :options=\"i.options\"\n      />\n    </lz-form-item>\n    <template #footer-append>\n      <a-checkbox v-model=\"cache\">更新缓存</a-checkbox>\n    </template>\n  </lz-form>\n</template>\n\n<script>\nimport LzForm from '@c/LzForm'\nimport LzFormItem from '@c/LzForm/LzFormItem'\nimport {\n  cacheConfig,\n  getConfigsByCategorySlug,\n  updateConfigValues,\n} from '@/api/configs'\nimport TypeInput from './TypeInput'\nimport { CACHE_AFTER_UPDATE_CONFIG, mapConstants, SYSTEM_BASIC } from '@/libs/constants'\nimport { stringBool } from '@/libs/utils'\nimport { axios } from '@/axios/request'\n\nexport default {\n  name: 'ConfigsForm',\n  components: {\n    TypeInput,\n    LzForm,\n    LzFormItem,\n  },\n  data() {\n    return {\n      form: {},\n      errors: {},\n      configs: [],\n      cache: stringBool(localStorage.getItem(CACHE_AFTER_UPDATE_CONFIG)),\n    }\n  },\n  computed: {\n    ...mapConstants(['CONFIG_TYPES']),\n    category() {\n      return this.$route.params.categorySlug\n    },\n  },\n  methods: {\n    async getData() {\n      const { data } = await getConfigsByCategorySlug(this.category)\n\n      this.configs = data\n\n      const form = {}\n      data.forEach((i) => {\n        form[i.slug] = i.value\n      })\n      this.form = form\n    },\n    async onSubmit() {\n      const { data } = await updateConfigValues(this.category, this.form)\n      if (this.category === SYSTEM_BASIC.SLUG) {\n        this.$store.commit('SET_CONFIG', {\n          path: SYSTEM_BASIC.SLUG,\n          value: data,\n        })\n      }\n\n      if (this.cache) {\n        await cacheConfig()\n      }\n    },\n  },\n  watch: {\n    cache(newVal) {\n      localStorage.setItem(CACHE_AFTER_UPDATE_CONFIG, newVal)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfigsForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfigsForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfigsForm.vue?vue&type=template&id=b0bd713a&\"\nimport script from \"./ConfigsForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfigsForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <page-content center>\n    <configs-form/>\n  </page-content>\n</template>\n\n<script>\nimport ConfigsForm from './components/ConfigsForm'\nimport PageContent from '@c/PageContent'\n\nexport default {\n  name: 'ConfigValuesForm',\n  components: {\n    PageContent,\n    ConfigsForm,\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfigValuesForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfigValuesForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfigValuesForm.vue?vue&type=template&id=4441f0bc&\"\nimport script from \"./ConfigValuesForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfigValuesForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=0&id=03e2356c&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=0&id=03e2356c&scoped=true&lang=less&\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=1&lang=less&\""],"sourceRoot":""}