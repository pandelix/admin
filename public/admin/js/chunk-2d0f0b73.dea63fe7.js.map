{"version":3,"sources":["webpack:///./src/views/config-categories/Index.vue?dc76","webpack:///src/views/config-categories/Index.vue","webpack:///./src/views/config-categories/Index.vue?3e9f","webpack:///./src/views/config-categories/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","search","on","$event","createDialog","_v","cates","x","scopedSlots","_u","key","fn","record","id","updateConfigCategory","model","value","callback","$$v","$set","expression","destroyConfigCategory","page","ref","form","errors","onStoreCategory","staticRenderFns","name","scroll","components","CacheConfig","QuickEdit","LzFormItem","LzForm","LzPopconfirm","PageContent","LzPagination","Space","SearchForm","data","slug","methods","watch","$route","immediate","newVal","$refs","onReset","component"],"mappings":"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","file":"js/chunk-2d0f0b73.dea63fe7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page-content',[_c('space',{staticClass:\"my-1\"},[_c('search-form',{attrs:{\"fields\":_vm.search}}),_c('a-button',{on:{\"click\":function($event){_vm.createDialog = true}}},[_vm._v(\"添加\")]),_c('cache-config')],1),_c('a-table',{attrs:{\"row-key\":\"id\",\"data-source\":_vm.cates,\"bordered\":\"\",\"scroll\":{ x: 950 },\"pagination\":false}},[_c('a-table-column',{attrs:{\"title\":\"ID\",\"data-index\":\"id\",\"width\":60}}),_c('a-table-column',{attrs:{\"title\":\"名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(record){return [_c('quick-edit',{attrs:{\"id\":record.id,\"field\":\"name\",\"update\":_vm.updateConfigCategory},model:{value:(record.name),callback:function ($$v) {_vm.$set(record, \"name\", $$v)},expression:\"record.name\"}})]}}])}),_c('a-table-column',{attrs:{\"title\":\"标识\"},scopedSlots:_vm._u([{key:\"default\",fn:function(record){return [_c('quick-edit',{attrs:{\"id\":record.id,\"field\":\"slug\",\"update\":_vm.updateConfigCategory},model:{value:(record.slug),callback:function ($$v) {_vm.$set(record, \"slug\", $$v)},expression:\"record.slug\"}})]}}])}),_c('a-table-column',{attrs:{\"title\":\"添加时间\",\"data-index\":\"created_at\",\"width\":180}}),_c('a-table-column',{attrs:{\"title\":\"修改时间\",\"data-index\":\"updated_at\",\"width\":180}}),_c('a-table-column',{attrs:{\"title\":\"操作\",\"width\":200},scopedSlots:_vm._u([{key:\"default\",fn:function(record){return [_c('space',[_c('router-link',{attrs:{\"to\":(\"/configs/create?category_id=\" + (record.id))}},[_vm._v(\"添加配置\")]),_c('router-link',{attrs:{\"to\":(\"/configs?category_id=\" + (record.id))}},[_vm._v(\"查看配置\")]),_c('lz-popconfirm',{attrs:{\"confirm\":_vm.destroyConfigCategory(record.id)}},[_c('a',{staticClass:\"error-color\",attrs:{\"href\":\"javascript:void(0);\"}},[_vm._v(\"删除\")])])],1)]}}])})],1),_c('lz-pagination',{attrs:{\"page\":_vm.page}}),_c('a-modal',{attrs:{\"title\":\"添加分类\",\"footer\":null,\"width\":\"400px\"},model:{value:(_vm.createDialog),callback:function ($$v) {_vm.createDialog=$$v},expression:\"createDialog\"}},[_c('lz-form',{ref:\"form\",attrs:{\"disable-redirect\":\"\",\"form\":_vm.form,\"errors\":_vm.errors,\"submit\":_vm.onStoreCategory,\"in-dialog\":\"\",\"layout\":\"vertical\"},on:{\"update:form\":function($event){_vm.form=$event},\"update:errors\":function($event){_vm.errors=$event}}},[_c('lz-form-item',{attrs:{\"label\":\"名称\",\"required\":\"\",\"prop\":\"name\"}},[_c('a-input',{attrs:{\"focus\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"标识\",\"required\":\"\",\"prop\":\"slug\"}},[_c('a-input',{model:{value:(_vm.form.slug),callback:function ($$v) {_vm.$set(_vm.form, \"slug\", $$v)},expression:\"form.slug\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <page-content>\n    <space class=\"my-1\">\n      <search-form :fields=\"search\"/>\n      <a-button @click=\"createDialog = true\">添加</a-button>\n      <cache-config/>\n    </space>\n\n    <a-table\n      row-key=\"id\"\n      :data-source=\"cates\"\n      bordered\n      :scroll=\"{ x: 950 }\"\n      :pagination=\"false\"\n    >\n      <a-table-column title=\"ID\" data-index=\"id\" :width=\"60\"/>\n      <a-table-column title=\"名称\">\n        <template #default=\"record\">\n          <quick-edit\n            :id=\"record.id\"\n            field=\"name\"\n            :update=\"updateConfigCategory\"\n            v-model=\"record.name\"\n          />\n        </template>\n      </a-table-column>\n      <a-table-column title=\"标识\">\n        <template #default=\"record\">\n          <quick-edit\n            :id=\"record.id\"\n            field=\"slug\"\n            :update=\"updateConfigCategory\"\n            v-model=\"record.slug\"\n          />\n        </template>\n      </a-table-column>\n      <a-table-column title=\"添加时间\" data-index=\"created_at\" :width=\"180\"/>\n      <a-table-column title=\"修改时间\" data-index=\"updated_at\" :width=\"180\"/>\n      <a-table-column title=\"操作\" :width=\"200\">\n        <template #default=\"record\">\n          <space>\n            <router-link :to=\"`/configs/create?category_id=${record.id}`\">添加配置</router-link>\n            <router-link :to=\"`/configs?category_id=${record.id}`\">查看配置</router-link>\n            <lz-popconfirm :confirm=\"destroyConfigCategory(record.id)\">\n              <a class=\"error-color\" href=\"javascript:void(0);\">删除</a>\n            </lz-popconfirm>\n          </space>\n        </template>\n      </a-table-column>\n    </a-table>\n    <lz-pagination :page=\"page\"/>\n\n    <a-modal\n      title=\"添加分类\"\n      v-model=\"createDialog\"\n      :footer=\"null\"\n      width=\"400px\"\n    >\n      <lz-form\n        ref=\"form\"\n        disable-redirect\n        :form.sync=\"form\"\n        :errors.sync=\"errors\"\n        :submit=\"onStoreCategory\"\n        in-dialog\n        layout=\"vertical\"\n      >\n        <lz-form-item label=\"名称\" required prop=\"name\">\n          <a-input v-model=\"form.name\" focus/>\n        </lz-form-item>\n        <lz-form-item label=\"标识\" required prop=\"slug\">\n          <a-input v-model=\"form.slug\"/>\n        </lz-form-item>\n      </lz-form>\n    </a-modal>\n  </page-content>\n</template>\n\n<script>\nimport {\n  getConfigCategories,\n  storeConfigCategory,\n  updateConfigCategory,\n  destroyConfigCategory,\n} from '@/api/configs'\nimport Space from '@c/Space'\nimport LzPagination from '@c/LzPagination'\nimport PageContent from '@c/PageContent'\nimport SearchForm from '@c/SearchForm'\nimport LzPopconfirm from '@c/LzPopconfirm'\nimport { removeWhile } from '@/libs/utils'\nimport LzForm from '@c/LzForm/index'\nimport LzFormItem from '@c/LzForm/LzFormItem'\nimport QuickEdit from '@c/QuickEdit'\nimport CacheConfig from '@v/configs/components/CacheConfig'\n\nexport default {\n  name: 'Index',\n  scroll: true,\n  components: {\n    CacheConfig,\n    QuickEdit,\n    LzFormItem,\n    LzForm,\n    LzPopconfirm,\n    PageContent,\n    LzPagination,\n    Space,\n    SearchForm,\n  },\n  data() {\n    return {\n      cates: [],\n      page: null,\n\n      search: [\n        {\n          field: 'name',\n          label: '名称',\n        },\n        {\n          field: 'slug',\n          label: '标识',\n        },\n      ],\n\n      createDialog: false,\n\n      form: {\n        name: '',\n        slug: '',\n      },\n      errors: {},\n    }\n  },\n  methods: {\n    destroyConfigCategory(id) {\n      return async () => {\n        await destroyConfigCategory(id)\n        this.cates = removeWhile(this.cates, (i) => i.id === id)\n      }\n    },\n    async onStoreCategory($form) {\n      const { data } = await storeConfigCategory(this.form)\n\n      this.cates.unshift(data)\n\n      if ($form.stay) {\n        $form.onReset()\n      } else {\n        this.createDialog = false\n      }\n    },\n    updateConfigCategory,\n  },\n  watch: {\n    $route: {\n      async handler(newVal) {\n        const { data: { data, meta } } = await getConfigCategories(newVal.query)\n        this.cates = data\n        this.page = meta\n\n        this.$scrollResolve()\n      },\n      immediate: true,\n    },\n    createDialog(newVal) {\n      if (!newVal) {\n        this.$refs.form.onReset()\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=686f1bfc&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}