(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03fb85e2"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"142e":function(t,e,a){},2847:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"resize",rawName:"v-resize",value:t.setImgSize,expression:"setImgSize"}],staticClass:"file-preview flex-box"},[t.path?t.isImage?a("img",{staticClass:"img",attrs:{alt:t.path,title:t.path,src:t.url}}):a("div",{staticClass:"path",attrs:{title:t.path}},[t._v(t._s(t.path))]):a("div",{staticClass:"invalid",attrs:{title:t.path}},[t._v(" 无效 ")]),a("div",{staticClass:"actions flex-box"},[a("space",{attrs:{size:"4"}},[t.disableView?t._e():[t.isImage?a("a-icon",{attrs:{type:"eye",title:"查看"},on:{click:function(e){return e.stopPropagation(),t.onPreview(e)}}}):a("a",{attrs:{href:t.url,target:"_blank",title:"查看"}},[a("a-icon",{attrs:{type:"eye"}})],1)],t._t("default",null,{file:t.formattedFile})],2)],1)])},n=[],r=a("53ca"),s=a("5530"),o=a("a6d5"),c=a("2f62"),l=a("90fe"),u=a("f2af"),d=a("36bd"),f={name:"FilePreview",components:{Space:d["a"]},data:function(){return{formattedFile:{path:"",url:""},width:0,height:0}},props:Object(s["a"])({file:null,disableView:Boolean},Object(c["c"])(["miniWidth"])),computed:{isImage:function(){return Object(o["b"])(this.formattedFile.path)},url:function(){return this.formattedFile.url},path:function(){return this.formattedFile.path}},methods:{toUpperCase:function(t){return t.toUpperCase()},formatFile:function(){var t=this.file;t&&("string"===typeof t?this.formattedFile={path:t,url:Object(l["i"])(t)}:"object"===Object(r["a"])(t)&&(this.formattedFile=Object.assign({},t,{path:t.path||"",url:t.url||Object(l["i"])(t.path)})))},onPreview:function(){var t=this;this.$createElement;this.isImage&&(this.setImgSize(),u["a"].new({propsData:{wrapClassName:"image-preview-dialog",width:"auto",content:function(e){return e("img",{attrs:{src:t.formattedFile.url,width:t.width,height:t.height}})}}}))},setImgSize:function(){if(this.isImage){var t=Math.min(1e3,.9*window.innerWidth),e=.9*window.innerHeight,a=this.$el.querySelector(".img");this.width=a.naturalWidth||1,this.height=a.naturalHeight||1;var i=this.width/this.height;this.width>t&&(this.width=t,this.height=this.width/i),this.height>e&&(this.height=e,this.width=this.height*i)}}},watch:{file:{handler:function(){this.formatFile()},immediate:!0}}},h=f,p=(a("42d2"),a("7900"),a("2877")),m=Object(p["a"])(h,i,n,!1,null,"44603ec1",null);e["a"]=m.exports},"42d2":function(t,e,a){"use strict";var i=a("142e"),n=a.n(i);n.a},4958:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",[a("space",{staticClass:"my-1"},[a("search-form",{attrs:{fields:t.search}}),a("cache-config")],1),a("a-table",{attrs:{"row-key":"id","data-source":t.configs,bordered:"",scroll:{x:1600},pagination:!1,"table-layout":"fixed"}},[a("a-table-column",{attrs:{title:"ID","data-index":"id",width:60}}),a("a-table-column",{attrs:{title:"分类","data-index":"category.name",width:150}}),a("a-table-column",{attrs:{title:"名称",width:150},scopedSlots:t._u([{key:"default",fn:function(e){return[a("quick-edit",{attrs:{id:e.id,field:"name",update:t.updateConfig},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"record.name"}})]}}])}),a("a-table-column",{attrs:{title:"标识",width:150},scopedSlots:t._u([{key:"default",fn:function(e){return[a("quick-edit",{attrs:{id:e.id,field:"slug",update:t.updateConfig},model:{value:e.slug,callback:function(a){t.$set(e,"slug",a)},expression:"record.slug"}})]}}])}),a("a-table-column",{attrs:{title:"类型","data-index":"type_text",width:100}}),a("a-table-column",{attrs:{title:"值"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.type===t.CONFIG_TYPES.FILE?a("div",{staticStyle:{display:"flex","overflow-x":"auto"}},t._l(t.arrayWrap(e.value),(function(t,e){return a("file-preview",{key:e,attrs:{file:t}})})),1):a("span",[t._v(t._s(e.value))])]}}])}),a("a-table-column",{attrs:{title:"添加时间","data-index":"created_at",width:180}}),a("a-table-column",{attrs:{title:"修改时间","data-index":"updated_at",width:180}}),a("a-table-column",{attrs:{title:"操作",width:100},scopedSlots:t._u([{key:"default",fn:function(e){return[a("space",[a("router-link",{attrs:{to:"/configs/"+e.id+"/edit"}},[t._v("编辑")]),a("lz-popconfirm",{attrs:{confirm:t.destroyConfig(e.id)}},[a("a",{staticClass:"error-color",attrs:{href:"javascript:void(0);"}},[t._v("删除")])])],1)]}}])})],1),a("lz-pagination",{attrs:{page:t.page}})],1)},n=[],r=(a("ac1f"),a("841c"),a("96cf"),a("1da1")),s=a("5530"),o=a("4d2d"),c=a("36bd"),l=a("d613"),u=a("33c7"),d=a("38db"),f=a("1028"),h=a("90fe"),p=a("4141"),m=a("2847"),g=a("e572"),b=a("b107"),v={name:"Index",scroll:!0,components:{CacheConfig:b["a"],QuickEdit:p["a"],LzPopconfirm:f["a"],PageContent:u["a"],LzPagination:l["a"],Space:c["a"],SearchForm:d["a"],FilePreview:m["a"]},data:function(){return{configs:[],page:null,search:[{field:"category_id",label:"分类",type:"select",options:[],labelField:"name",valueField:"id"},{field:"name",label:"名称"},{field:"slug",label:"标识"}]}},computed:Object(s["a"])({},Object(g["f"])("CONFIG_TYPES")),created:function(){this.getConfigCategories()},methods:{arrayWrap:h["a"],destroyConfig:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["c"])(t);case 2:e.configs=Object(h["r"])(e.configs,(function(e){return e.id===t}));case 3:case"end":return a.stop()}}),a)})))},updateConfig:o["n"],getConfigCategories:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["g"])({all:1});case 2:a=e.sent,i=a.data,t.search[0].options=i;case 5:case"end":return e.stop()}}),e)})))()}},watch:{$route:{handler:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["h"])(t.query);case 2:i=a.sent,n=i.data,r=n.data,s=n.meta,e.configs=r,e.page=s,e.$scrollResolve();case 9:case"end":return a.stop()}}),a)})))()},immediate:!0}}},w=v,y=a("2877"),x=Object(y["a"])(w,i,n,!1,null,null,null);e["default"]=x.exports},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}},7900:function(t,e,a){"use strict";var i=a("d418"),n=a.n(i);n.a},"841c":function(t,e,a){"use strict";var i=a("d784"),n=a("825a"),r=a("1d80"),s=a("129f"),o=a("14c3");i("search",1,(function(t,e,a){return[function(e){var a=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var r=n(t),c=String(this),l=r.lastIndex;s(l,0)||(r.lastIndex=0);var u=o(r,c);return s(r.lastIndex,l)||(r.lastIndex=l),null===u?-1:u.index}]}))},d418:function(t,e,a){}}]);
//# sourceMappingURL=chunk-03fb85e2.205da2f1.js.map