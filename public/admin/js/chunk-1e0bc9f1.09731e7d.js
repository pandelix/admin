(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e0bc9f1"],{"0695":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-content",{attrs:{center:""}},[a("lz-form",{attrs:{"get-data":e.getData,submit:e.onSubmit,form:e.form,errors:e.errors},on:{"update:form":function(t){e.form=t},"update:errors":function(t){e.errors=t}}},[a("lz-form-item",{attrs:{label:"帐号",required:"",prop:"username"}},[a("a-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("lz-form-item",{attrs:{label:"姓名",required:"",prop:"name"}},[a("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("lz-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("file-picker",{attrs:{ext:"jpg,gif,png,jpeg"},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1),a("lz-form-item",{attrs:{label:"密码","required-when-create":"",prop:"password"}},[a("a-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("lz-form-item",{attrs:{label:"确认密码","required-when-create":"",prop:"password_confirmation"}},[a("a-input",{attrs:{type:"password"},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}})],1),a("lz-form-item",{attrs:{label:"角色",prop:"roles"}},[a("a-select",{attrs:{mode:"multiple","option-filter-prop":"name","allow-clear":""},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}},e._l(e.roles,(function(t){return a("a-select-option",{key:t.id,attrs:{name:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("lz-form-item",{attrs:{label:"权限",prop:"permissions"}},[a("a-select",{attrs:{mode:"multiple","option-filter-prop":"name","allow-clear":""},model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},e._l(e.permissions,(function(t){return a("a-select-option",{key:t.id,attrs:{name:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1)},i=[],n=(a("96cf"),a("1da1")),s=a("44c4"),o=a("04bc"),l=a("d99d"),c=a("33c7"),u=a("6d97"),m={name:"Form",components:{FilePicker:u["a"],PageContent:c["a"],LzForm:o["a"],LzFormItem:l["a"]},data:function(){return{form:{username:"",name:"",password:"",password_confirmation:"",roles:[],permissions:[],avatar:""},errors:{},roles:[],permissions:[]}},methods:{getData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.realEditMode){a.next=7;break}return a.next=3,Object(s["c"])(e.resourceId);case 3:i=a.sent,r=i.data,a.next=11;break;case 7:return a.next=9,Object(s["a"])();case 9:n=a.sent,r=n.data;case 11:return t.roles=r.roles,t.permissions=r.permissions,a.abrupt("return",r.data);case 14:case"end":return a.stop()}}),a)})))()},onSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.realEditMode){a.next=5;break}return a.next=3,Object(s["h"])(e.resourceId,t.form);case 3:a.next=7;break;case 5:return a.next=7,Object(s["g"])(t.form);case 7:case"end":return a.stop()}}),a)})))()}}},p=m,f=a("2877"),d=Object(f["a"])(p,r,i,!1,null,null,null);t["default"]=d.exports},"6d97":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-picker"},[a("div",{staticClass:"file-wrapper"},[e._l(e.arrayValue,(function(t,r){return a("file-preview",{key:r,staticClass:"preview file-item",attrs:{file:t}},[a("a-icon",{staticClass:"replace",attrs:{type:"sync",title:"替换"},on:{click:function(t){return t.stopPropagation(),e.onReplace(r)}}}),a("lz-popconfirm",{attrs:{title:"确认移除？",confirm:function(){return e.remove(r)}}},[a("a-icon",{staticClass:"remove",attrs:{type:"delete",title:"移除"}})],1)],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMax,expression:"!isMax"}],staticClass:"picker file-item flex-box",on:{click:e.onPick}},[a("svg-icon",{staticClass:"file-icon",attrs:{"icon-class":e.pickerIcon}})],1)],2),a("a-modal",{attrs:{title:e.title,width:"90%",footer:null,"wrap-class-name":"system-media-dialog"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("system-media",{ref:"media",attrs:{"default-multiple":e.mediaMultiple,"default-ext":e.ext},scopedSlots:e._u([{key:"actions",fn:function(t){return[a("a-button",{attrs:{type:"primary",disabled:!t.anySelected},on:{click:function(a){return e.onPickConfirm(t.selected)}}},[e._v(" 选定 ")])]}}])})],1)],1)},i=[],n=(a("99af"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("ddb0"),a("2909")),s=a("5530"),o=a("8a59"),l=a("2847"),c=a("2593"),u=a.n(c),m=a("1028"),p={name:"FilePicker",components:{LzPopconfirm:m["a"],FilePreview:l["a"],SystemMedia:o["a"]},inject:{lzFormItem:{default:null}},data:function(){return{dialog:!1,formattedValue:null,pickIndex:-1}},props:{multiple:Boolean,max:{type:[String,Number],default:8},title:{type:String,default:function(){var e;return(null===(e=this.lzFormItem)||void 0===e?void 0:e.label)||"选择文件"}},value:null,ext:String,valueFields:{type:String,default:"path"},flatValue:{type:Boolean,default:!0}},computed:{pickerIcon:function(){return this.multiple?"multi-file":"single-file"},canPick:function(){return!this.isMax||this.isReplace},isMax:function(){return this.multiple&&this.value.length>=this.max||!this.multiple&&this.value},isReplace:function(){return-1!==this.pickIndex},miniWidth:function(){return this.$store.state.miniWidth},arrayValue:function(){return this.value?Array.isArray(this.value)?this.value:[this.value]:[]},mediaMultiple:function(){return!this.isReplace&&this.multiple}},methods:{onPick:function(){this.canPick&&(this.dialog=!0)},onPickConfirm:function(e){var t;e=e.map(this.formatReturn),this.multiple?this.isReplace?(t=this.value,t[this.pickIndex]=e[0]):t=this.value.concat(e.slice(0,this.max-this.value.length)):t=e[0],this.$emit("input",t),this.$refs.media.clearSelected(),this.dialog=!1},formatReturn:function(e){var t=this.valueFields?this.valueFields.split(","):[];return 0===t.length?e=Object(s["a"])({},e):(t.push("path"),e=u()(e,t)),t=Object(n["a"])(new Set(t)),this.flatValue&&1===t.length?e[t[0]]:e},remove:function(e){this.multiple?this.value.splice(e,1):this.$emit("input",null)},onReplace:function(e){this.pickIndex=e,this.onPick()}},watch:{dialog:function(e){e||(this.pickIndex=-1)}}},f=p,d=(a("77f6"),a("daf7"),a("2877")),h=Object(d["a"])(f,r,i,!1,null,"03e2356c",null);t["a"]=h.exports},"77f6":function(e,t,a){"use strict";var r=a("cae9"),i=a.n(r);i.a},a41d:function(e,t,a){},cae9:function(e,t,a){},daf7:function(e,t,a){"use strict";var r=a("a41d"),i=a.n(r);i.a}}]);
//# sourceMappingURL=chunk-1e0bc9f1.09731e7d.js.map