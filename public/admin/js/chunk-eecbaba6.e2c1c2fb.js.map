{"version":3,"sources":["webpack:///./src/views/configs/components/TypeOptions.vue?36d8","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/views/configs/components/TypeInput.vue","webpack:///src/views/configs/components/TypeInput.vue","webpack:///./src/views/configs/components/TypeInput.vue?bcd0","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./src/views/configs/Form.vue?cdf4","webpack:///./src/views/configs/components/TypeOptions.vue?f0fa","webpack:///src/views/configs/components/TypeOptions.vue","webpack:///./src/views/configs/components/TypeOptions.vue?f89a","webpack:///./src/views/configs/components/TypeOptions.vue","webpack:///src/views/configs/Form.vue","webpack:///./src/views/configs/Form.vue?937f","webpack:///./src/views/configs/Form.vue","webpack:///./src/components/LzForm/FilePicker.vue?5b64","webpack:///src/components/LzForm/FilePicker.vue","webpack:///./src/components/LzForm/FilePicker.vue?4a62","webpack:///./src/components/LzForm/FilePicker.vue","webpack:///./src/components/LzForm/FilePicker.vue?e0bc","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/components/LzForm/FilePicker.vue?36dd"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","staticRenderFns","name","components","FilePicker","data","filePickerKey","props","type","String","options","computed","selectOptions","pairs","forEach","label","methods","onInput","this","$emit","val","initValue","CONFIG_TYPES","FILE","max","indexOf","updateFilePicker","watch","handler","immediate","slice","newVal","render","attrs","on","TYPES","INPUT","OTHER","component","vModelEventKey","TEXTAREA","renderData","assign","ext","multiple","key","SINGLE_SELECT","MULTIPLE_SELECT","$","$trim","trim","forcedStringTrimMethod","target","proto","forced","_vm","_h","$createElement","_c","_self","getData","onSubmit","form","errors","$event","model","callback","$$v","$set","expression","_l","_v","id","staticClass","prop","event","created","optionsBak","$on","onReset","beforeDestroy","$off","initOptions","defaultValue","v","$route","LzFormItem","PageContent","TypeInput","TypeOptions","LzForm","category_id","slug","desc","validation_rules","types","cates","item","stopPropagation","onReplace","remove","directives","rawName","isMax","onPick","pickerIcon","title","dialog","ref","mediaMultiple","scopedSlots","_u","fn","media","anySelected","onPickConfirm","selected","LzPopconfirm","FilePreview","SystemMedia","inject","lzFormItem","default","formattedValue","pickIndex","Boolean","Number","valueFields","flatValue","canPick","isReplace","miniWidth","$store","state","arrayValue","map","formatReturn","$refs","clearSelected","fields","splice","index","fails","whitespaces","non","module","exports","METHOD_NAME"],"mappings":"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","file":"js/chunk-eecbaba6.e2c1c2fb.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeOptions.vue?vue&type=style&index=0&id=150a690a&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeOptions.vue?vue&type=style&index=0&id=150a690a&scoped=true&lang=less&\"","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","var render, staticRenderFns\nimport script from \"./TypeInput.vue?vue&type=script&lang=js&\"\nexport * from \"./TypeInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { mapConstants } from '@/libs/constants'\nimport FilePicker from '@c/LzForm/FilePicker'\nimport _debounce from 'lodash/debounce'\n\nexport default {\n  name: 'TypeInput',\n  components: {\n    FilePicker,\n  },\n  data() {\n    return {\n      filePickerKey: 1,\n    }\n  },\n  props: {\n    type: String,\n    value: null,\n    options: Object,\n  },\n  computed: {\n    ...mapConstants(['CONFIG_TYPES']),\n    selectOptions() {\n      if (\n        (this.type !== this.CONFIG_TYPES.SINGLE_SELECT) &&\n        (this.type !== this.CONFIG_TYPES.MULTIPLE_SELECT)\n      ) {\n        return []\n      } else {\n        const pairs = this.options.options.split('\\n')\n        const options = []\n        pairs.forEach((pair) => {\n          const [value, label] = pair.split('=>').map((i) => i.trim())\n          if (label) {\n            options.push({ value, label })\n          }\n        })\n        return options\n      }\n    },\n  },\n  methods: {\n    onInput(val) {\n      this.$emit('input', val)\n    },\n    /**\n     * 当类型或者文件选择最大限制改变时，要改变值的类型\n     */\n    initValue() {\n      if (this.type === this.CONFIG_TYPES.FILE) {\n        if (this.options.max > 1 && !Array.isArray(this.value)) {\n          // 如果是多选，且原来的值不是数组，则用数组包起来，空值则为空数组\n          this.onInput(this.value ? [this.value] : [])\n        } else if (this.options.max <= 1 && Array.isArray(this.value)) {\n          // 如果是单选，且原来的值是数组，则选第一个，否则为 null\n          this.onInput(this.value[0] || null)\n        }\n      } else if (this.type === this.CONFIG_TYPES.MULTIPLE_SELECT) {\n        !Array.isArray(this.value) && this.onInput([])\n      } else {\n        if (['string', 'boolean', 'number'].indexOf(typeof this.value) === -1) {\n          this.onInput(null)\n        }\n      }\n    },\n    /**\n     * 重新渲染 FilePicker 组件\n     */\n    updateFilePicker: _debounce(function () {\n      this.filePickerKey++\n    }, 500),\n  },\n  watch: {\n    type: {\n      handler() {\n        this.initValue()\n      },\n      immediate: true,\n    },\n    'options.max'(newVal, oldVal) {\n      // 如果变了之后，都还是多选，则不用更新\n      // 这里条件取反\n      if (!((newVal > 1) && (oldVal > 1))) {\n        this.updateFilePicker()\n      }\n      this.initValue()\n      // 多选时，如果数量变少了，则要去掉 value 中多出来的文件\n      if ((newVal > 1) && (newVal < oldVal)) {\n        this.onInput(this.value.slice(0, newVal))\n      }\n    },\n    'options.ext'() {\n      this.updateFilePicker()\n    },\n  },\n  render(h) {\n    const renderData = {\n      attrs: {\n        value: this.value,\n      },\n      on: {},\n    }\n\n    // v-model 的 event 的 key\n    let vModelEventKey\n    let component = null\n    let slots = null\n\n    const TYPES = this.CONFIG_TYPES\n\n    switch (this.type) {\n      case TYPES.INPUT:\n      case TYPES.OTHER:\n        component = 'a-input'\n        vModelEventKey = 'change.value'\n        break\n      case TYPES.TEXTAREA:\n        component = 'a-input'\n        vModelEventKey = 'change.value'\n        renderData.attrs.type = 'textarea'\n        break\n      case TYPES.FILE:\n        component = 'file-picker'\n        vModelEventKey = 'input'\n        Object.assign(renderData.attrs, {\n          max: this.options.max,\n          ext: this.options.ext,\n          multiple: this.options.max > 1,\n        })\n        // 修改文件选择的配置时，通过更新 key，使重新渲染文件选择器，这样比较省事\n        // 每次修改配置，使 key 加 1，并做 防抖处理\n        renderData.key = this.filePickerKey\n        break\n      case TYPES.SINGLE_SELECT:\n      case TYPES.MULTIPLE_SELECT: {\n        const isMultiple = this.type === TYPES.MULTIPLE_SELECT\n        if (this.options.type === 'input') {\n          component = isMultiple\n            ? 'a-checkbox-group'\n            : 'a-radio-group'\n          vModelEventKey = 'input'\n          const optionComponent = isMultiple\n            ? 'a-checkbox'\n            : 'a-radio'\n          slots = this.selectOptions.map((i) => (\n            <optionComponent key={i.value} value={i.value}>{i.label}</optionComponent>\n          ))\n        } else if (this.options.type === 'select') {\n          component = 'a-select'\n          vModelEventKey = 'change'\n          Object.assign(renderData.attrs, {\n            mode: isMultiple ? 'multiple' : 'default',\n            allowClear: isMultiple,\n          })\n          slots = this.selectOptions.map((i) => (\n            <a-select-option key={i.value} value={i.value}>{i.label}</a-select-option>\n          ))\n        }\n        break\n      }\n      default:\n      // do nothing\n    }\n\n    renderData.on[vModelEventKey] = this.onInput\n\n    return <component {...renderData}>{slots}</component>\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeInput.vue?vue&type=script&lang=js&\"","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page-content',{attrs:{\"center\":\"\"}},[_c('lz-form',{attrs:{\"get-data\":_vm.getData,\"submit\":_vm.onSubmit,\"form\":_vm.form,\"errors\":_vm.errors},on:{\"update:form\":function($event){_vm.form=$event},\"update:errors\":function($event){_vm.errors=$event}}},[_c('lz-form-item',{attrs:{\"label\":\"类型\",\"prop\":\"type\",\"required\":\"\"}},[_c('a-radio-group',{model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},_vm._l((_vm.types),function(i){return _c('a-radio',{key:i.value,attrs:{\"value\":i.value}},[_vm._v(\" \"+_vm._s(i.label)+\" \")])}),1)],1),_c('lz-form-item',{attrs:{\"label\":\"分类\",\"prop\":\"category_id\",\"required\":\"\"}},[_c('a-select',{attrs:{\"option-filter-prop\":\"name\",\"show-search\":\"\"},model:{value:(_vm.form.category_id),callback:function ($$v) {_vm.$set(_vm.form, \"category_id\", $$v)},expression:\"form.category_id\"}},_vm._l((_vm.cates),function(i){return _c('a-select-option',{key:i.id,attrs:{\"name\":i.name}},[_vm._v(\" \"+_vm._s(i.name)+\" \")])}),1)],1),_c('lz-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\",\"required\":\"\"}},[_c('a-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"标识\",\"prop\":\"slug\",\"required\":\"\"}},[_c('a-input',{model:{value:(_vm.form.slug),callback:function ($$v) {_vm.$set(_vm.form, \"slug\", $$v)},expression:\"form.slug\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"简介\",\"prop\":\"desc\"}},[_c('a-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"选项\",\"prop\":\"options\"}},[_c('type-options',{attrs:{\"type\":_vm.form.type},model:{value:(_vm.form.options),callback:function ($$v) {_vm.$set(_vm.form, \"options\", $$v)},expression:\"form.options\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"值\",\"prop\":\"value\"}},[_c('type-input',{attrs:{\"type\":_vm.form.type,\"options\":_vm.form.options},model:{value:(_vm.form.value),callback:function ($$v) {_vm.$set(_vm.form, \"value\", $$v)},expression:\"form.value\"}})],1),_c('lz-form-item',{attrs:{\"label\":\"验证规则\",\"prop\":\"validation_rules\"}},[_c('a-input',{model:{value:(_vm.form.validation_rules),callback:function ($$v) {_vm.$set(_vm.form, \"validation_rules\", $$v)},expression:\"form.validation_rules\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-form',[(_vm.type === this.CONFIG_TYPES.FILE)?[_c('a-form-item',{attrs:{\"label\":\"最大上传数\"}},[_c('a-input-number',{attrs:{\"min\":1,\"max\":99},model:{value:(_vm.value.max),callback:function ($$v) {_vm.$set(_vm.value, \"max\", $$v)},expression:\"value.max\"}})],1),_c('a-form-item',{attrs:{\"label\":\"文件类型\"}},[_c('a-input',{attrs:{\"placeholder\":\"多个之间用英文逗号隔开\"},model:{value:(_vm.value.ext),callback:function ($$v) {_vm.$set(_vm.value, \"ext\", $$v)},expression:\"value.ext\"}})],1)]:(_vm.type === this.CONFIG_TYPES.SINGLE_SELECT || _vm.type === this.CONFIG_TYPES.MULTIPLE_SELECT)?[_c('a-form-item',{attrs:{\"label\":\"选项设置\"}},[_c('a-input',{attrs:{\"type\":\"textarea\",\"rows\":\"4\",\"placeholder\":'配置示例：\\n值1=>文字1\\n值2=>文字2'},model:{value:(_vm.value.options),callback:function ($$v) {_vm.$set(_vm.value, \"options\", $$v)},expression:\"value.options\"}})],1),_c('a-form-item',{attrs:{\"label\":\"选择形式\"}},[_c('a-radio-group',{model:{value:(_vm.value.type),callback:function ($$v) {_vm.$set(_vm.value, \"type\", $$v)},expression:\"value.type\"}},[_c('a-radio',{attrs:{\"value\":\"input\",\"label\":\"input\"}},[_vm._v(\"单选/复选\")]),_c('a-radio',{attrs:{\"value\":\"select\",\"label\":\"select\"}},[_vm._v(\"下拉选择\")])],1)],1)]:[_c('a-form-item',{staticClass:\"ma-0\"},[_vm._v(\"无\")])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-form>\n    <template v-if=\"type === this.CONFIG_TYPES.FILE\">\n      <a-form-item label=\"最大上传数\">\n        <a-input-number v-model=\"value.max\" :min=\"1\" :max=\"99\"/>\n      </a-form-item>\n      <a-form-item label=\"文件类型\">\n        <a-input v-model=\"value.ext\" placeholder=\"多个之间用英文逗号隔开\"/>\n      </a-form-item>\n    </template>\n    <template v-else-if=\"type === this.CONFIG_TYPES.SINGLE_SELECT || type === this.CONFIG_TYPES.MULTIPLE_SELECT\">\n      <a-form-item label=\"选项设置\">\n        <a-input\n          type=\"textarea\"\n          rows=\"4\"\n          v-model=\"value.options\"\n          :placeholder=\"'配置示例：\\n值1=>文字1\\n值2=>文字2'\"\n        />\n      </a-form-item>\n      <a-form-item label=\"选择形式\">\n        <a-radio-group v-model=\"value.type\">\n          <a-radio value=\"input\" label=\"input\">单选/复选</a-radio>\n          <a-radio value=\"select\" label=\"select\">下拉选择</a-radio>\n        </a-radio-group>\n      </a-form-item>\n    </template>\n    <template v-else>\n      <a-form-item class=\"ma-0\">无</a-form-item>\n    </template>\n  </a-form>\n</template>\n\n<script>\nimport { mapConstants } from '@/libs/constants'\nimport _pick from 'lodash/pick'\n\nexport default {\n  name: 'TypeOptions',\n  model: {\n    prop: 'value',\n    event: 'change.value',\n  },\n  props: {\n    type: String,\n    value: Object,\n  },\n  computed: {\n    ...mapConstants(['CONFIG_TYPES']),\n  },\n  created() {\n    /**\n     * 存储类型对应的 options\n     * 用来在切换类型后，恢复原来设置的值\n     */\n    this.optionsBak = {}\n\n    this.$on('field-reset', this.onReset)\n  },\n  beforeDestroy() {\n    this.$off('field-reset', this.onReset)\n  },\n  methods: {\n    onReset() {\n      this.optionsBak = {}\n      this.initOptions()\n    },\n    initOptions() {\n      const type = this.type\n      if (!type) {\n        return\n      }\n\n      let defaultValue\n      switch (type) {\n        case this.CONFIG_TYPES.FILE:\n          defaultValue = {\n            max: 1,\n            ext: '',\n          }\n          break\n        case this.CONFIG_TYPES.SINGLE_SELECT:\n        case this.CONFIG_TYPES.MULTIPLE_SELECT:\n          defaultValue = {\n            options: '',\n            type: 'input',\n          }\n          break\n        default:\n          defaultValue = null\n      }\n\n      const v = defaultValue\n        ? _pick(Object.assign({}, this.optionsBak[type] || defaultValue, this.value), Object.keys(defaultValue))\n        : null\n      // 存储类型对应的 options，用来还原\n      this.optionsBak[type] = v\n      this.$emit('change.value', v)\n    },\n  },\n  watch: {\n    type: {\n      handler() {\n        this.initOptions()\n      },\n      immediate: true,\n    },\n    $route() {\n      // 路由变化会复用组件，清空一下\n      this.optionsBak = {}\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n.ant-form-item {\n  margin-bottom: 0;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeOptions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeOptions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TypeOptions.vue?vue&type=template&id=150a690a&scoped=true&\"\nimport script from \"./TypeOptions.vue?vue&type=script&lang=js&\"\nexport * from \"./TypeOptions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TypeOptions.vue?vue&type=style&index=0&id=150a690a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"150a690a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <page-content center>\n    <lz-form\n      :get-data=\"getData\"\n      :submit=\"onSubmit\"\n      :form.sync=\"form\"\n      :errors.sync=\"errors\"\n    >\n      <lz-form-item label=\"类型\" prop=\"type\" required>\n        <a-radio-group v-model=\"form.type\">\n          <a-radio\n            v-for=\"i of types\"\n            :key=\"i.value\"\n            :value=\"i.value\"\n          >\n            {{ i.label }}\n          </a-radio>\n        </a-radio-group>\n      </lz-form-item>\n      <lz-form-item label=\"分类\" prop=\"category_id\" required>\n        <a-select\n          v-model=\"form.category_id\"\n          option-filter-prop=\"name\"\n          show-search\n        >\n          <a-select-option\n            v-for=\"i of cates\"\n            :key=\"i.id\"\n            :name=\"i.name\"\n          >\n            {{ i.name }}\n          </a-select-option>\n        </a-select>\n      </lz-form-item>\n      <lz-form-item label=\"名称\" prop=\"name\" required>\n        <a-input v-model=\"form.name\"/>\n      </lz-form-item>\n      <lz-form-item label=\"标识\" prop=\"slug\" required>\n        <a-input v-model=\"form.slug\"/>\n      </lz-form-item>\n      <lz-form-item label=\"简介\" prop=\"desc\">\n        <a-input v-model=\"form.desc\" type=\"textarea\"/>\n      </lz-form-item>\n      <lz-form-item label=\"选项\" prop=\"options\">\n        <type-options v-model=\"form.options\" :type=\"form.type\"/>\n      </lz-form-item>\n      <lz-form-item label=\"值\" prop=\"value\">\n        <type-input\n          v-model=\"form.value\"\n          :type=\"form.type\"\n          :options=\"form.options\"\n        />\n      </lz-form-item>\n      <lz-form-item label=\"验证规则\" prop=\"validation_rules\">\n        <a-input v-model=\"form.validation_rules\"/>\n      </lz-form-item>\n    </lz-form>\n  </page-content>\n</template>\n\n<script>\nimport LzForm from '@c/LzForm'\nimport {\n  createConfig,\n  editConfig,\n  storeConfig,\n  updateConfig,\n} from '@/api/configs'\nimport _forIn from 'lodash/forIn'\nimport TypeOptions from './components/TypeOptions'\nimport TypeInput from './components/TypeInput'\nimport { toInt } from '@/libs/utils'\nimport PageContent from '@c/PageContent'\nimport LzFormItem from '@c/LzForm/LzFormItem'\n\nexport default {\n  name: 'Form',\n  components: {\n    LzFormItem,\n    PageContent,\n    TypeInput,\n    TypeOptions,\n    LzForm,\n  },\n  data() {\n    return {\n      form: {\n        type: '',\n        category_id: '',\n        name: '',\n        slug: '',\n        desc: '',\n        options: {},\n        value: '',\n        validation_rules: '',\n      },\n      errors: {},\n\n      types: [],\n      cates: [],\n    }\n  },\n  methods: {\n    async getData($form) {\n      let data\n\n      if ($form.realEditMode) {\n        ({ data } = await editConfig($form.resourceId))\n      } else {\n        ({ data } = await createConfig())\n      }\n\n      this.cates = data.categories\n\n      const types = []\n      _forIn(data.types_map, (value, key) => {\n        types.push({\n          value: key,\n          label: value,\n        })\n      })\n      this.types = types\n      // 表单中类型，默认选择第一个\n      this.form.type = types[0].value\n\n      !this.editMode && (this.form.category_id = toInt(this.$route.query.category_id, ''))\n\n      return data.data\n    },\n    async onSubmit($form) {\n      if ($form.realEditMode) {\n        await updateConfig($form.resourceId, this.form)\n      } else {\n        await storeConfig(this.form)\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=7cdab835&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"file-picker\"},[_c('div',{staticClass:\"file-wrapper\"},[_vm._l((_vm.arrayValue),function(item,i){return _c('file-preview',{key:i,staticClass:\"preview file-item\",attrs:{\"file\":item}},[_c('a-icon',{staticClass:\"replace\",attrs:{\"type\":\"sync\",\"title\":\"替换\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onReplace(i)}}}),_c('lz-popconfirm',{attrs:{\"title\":\"确认移除？\",\"confirm\":function () { return _vm.remove(i); }}},[_c('a-icon',{staticClass:\"remove\",attrs:{\"type\":\"delete\",\"title\":\"移除\"}})],1)],1)}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isMax),expression:\"!isMax\"}],staticClass:\"picker file-item flex-box\",on:{\"click\":_vm.onPick}},[_c('svg-icon',{staticClass:\"file-icon\",attrs:{\"icon-class\":_vm.pickerIcon}})],1)],2),_c('a-modal',{attrs:{\"title\":_vm.title,\"width\":\"90%\",\"footer\":null,\"wrap-class-name\":\"system-media-dialog\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('system-media',{ref:\"media\",attrs:{\"default-multiple\":_vm.mediaMultiple,\"default-ext\":_vm.ext},scopedSlots:_vm._u([{key:\"actions\",fn:function(media){return [_c('a-button',{attrs:{\"type\":\"primary\",\"disabled\":!media.anySelected},on:{\"click\":function($event){return _vm.onPickConfirm(media.selected)}}},[_vm._v(\" 选定 \")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"file-picker\">\n    <div class=\"file-wrapper\">\n      <file-preview\n        class=\"preview file-item\"\n        v-for=\"(item, i) of arrayValue\"\n        :key=\"i\"\n        :file=\"item\"\n      >\n        <a-icon\n          class=\"replace\"\n          type=\"sync\"\n          title=\"替换\"\n          @click.stop=\"onReplace(i)\"\n        />\n        <lz-popconfirm title=\"确认移除？\" :confirm=\"() => remove(i)\">\n          <a-icon\n            class=\"remove\"\n            type=\"delete\"\n            title=\"移除\"\n          />\n        </lz-popconfirm>\n      </file-preview>\n\n      <div\n        v-show=\"!isMax\"\n        class=\"picker file-item flex-box\"\n        @click=\"onPick\"\n      >\n        <svg-icon class=\"file-icon\" :icon-class=\"pickerIcon\"/>\n      </div>\n    </div>\n\n    <a-modal\n      :title=\"title\"\n      v-model=\"dialog\"\n      width=\"90%\"\n      :footer=\"null\"\n      wrap-class-name=\"system-media-dialog\"\n    >\n      <system-media\n        ref=\"media\"\n        :default-multiple=\"mediaMultiple\"\n        :default-ext=\"ext\"\n      >\n        <template #actions=\"media\">\n          <a-button\n            type=\"primary\"\n            :disabled=\"!media.anySelected\"\n            @click=\"onPickConfirm(media.selected)\"\n          >\n            选定\n          </a-button>\n        </template>\n      </system-media>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport SystemMedia from '@c/SystemMedia/index'\nimport FilePreview from '@c/FilePreview'\nimport _pick from 'lodash/pick'\nimport LzPopconfirm from '@c/LzPopconfirm'\n\nexport default {\n  name: 'FilePicker',\n  components: {\n    LzPopconfirm,\n    FilePreview,\n    SystemMedia,\n  },\n  inject: {\n    lzFormItem: {\n      default: null,\n    },\n  },\n  data() {\n    return {\n      dialog: false,\n      formattedValue: null,\n      pickIndex: -1,\n    }\n  },\n  props: {\n    /**\n     * 多选\n     */\n    multiple: Boolean,\n    /**\n     * 最多选多少个\n     */\n    max: {\n      type: [String, Number],\n      default: 8,\n    },\n    /**\n     * 选择器弹框的标题，默认为 FormItem 的 label 属性\n     */\n    title: {\n      type: String,\n      default() {\n        return this.lzFormItem?.label || '选择文件'\n      },\n    },\n    value: null,\n    /**\n     * 类型筛选，强制限制上传和选择\n     */\n    ext: String,\n    /**\n     * 返回的数据对象中，只包含指定字段，path 字段会自动包含\n     * 不传则包含所有字段\n     */\n    valueFields: {\n      type: String,\n      default: 'path',\n    },\n    /**\n     * 在 valueFields 只返回一个字段时，是否直接返回该字段值，而非对象\n     */\n    flatValue: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  computed: {\n    pickerIcon() {\n      return this.multiple ? 'multi-file' : 'single-file'\n    },\n    canPick() {\n      // 没有达到最大可选数，或者是替换文件的情况下，可以打开文件选择器\n      return !this.isMax || this.isReplace\n    },\n    isMax() {\n      return (this.multiple && this.value.length >= this.max) ||\n        (!this.multiple && this.value)\n    },\n    /**\n     * 是否是处于替换文件的情况\n     */\n    isReplace() {\n      return this.pickIndex !== -1\n    },\n    miniWidth() {\n      return this.$store.state.miniWidth\n    },\n    arrayValue() {\n      if (!this.value) {\n        return []\n      }\n\n      return Array.isArray(this.value) ? this.value : [this.value]\n    },\n    mediaMultiple() {\n      // 替换的情况下，只能单选\n      return this.isReplace ? false : this.multiple\n    },\n  },\n  methods: {\n    onPick() {\n      if (!this.canPick) {\n        return\n      }\n\n      this.dialog = true\n    },\n    onPickConfirm(selected) {\n      selected = selected.map(this.formatReturn)\n      let value\n      // 复制并格式化 selected 中的对象的值\n      if (this.multiple) {\n        if (this.isReplace) {\n          value = this.value\n          value[this.pickIndex] = selected[0]\n        } else {\n          value = this\n            .value\n            .concat(selected.slice(0, this.max - this.value.length))\n        }\n      } else {\n        value = selected[0]\n      }\n\n      this.$emit('input', value)\n      this.$refs.media.clearSelected()\n      this.dialog = false\n    },\n    /**\n     * 根据 valueFields 和 flatValue 格式化返回值\n     */\n    formatReturn(value) {\n      let fields = this.valueFields ? this.valueFields.split(',') : []\n      if (fields.length === 0) { // 返回字段为空，返回所有字段\n        value = { ...value }\n      } else { // 否则返回指定字段\n        // 默认自动包含 path 字段\n        fields.push('path')\n        value = _pick(value, fields)\n      }\n\n      // 去重\n      fields = [...new Set(fields)]\n      // 在只有一个字段时，如果需要平铺，则只返回该字段的值\n      if (this.flatValue && fields.length === 1) {\n        return value[fields[0]]\n      } else {\n        return value\n      }\n    },\n    remove(index) {\n      if (this.multiple) {\n        this.value.splice(index, 1)\n      } else {\n        this.$emit('input', null)\n      }\n    },\n    onReplace(index) {\n      this.pickIndex = index\n      this.onPick()\n    },\n  },\n  watch: {\n    dialog(newVal) {\n      if (!newVal) {\n        this.pickIndex = -1\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"~@/styles/vars\";\n\n.file-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.picker {\n  cursor: pointer;\n}\n\n.file-item {\n  width: 100px;\n  height: 100px;\n  min-width: 100px;\n  min-height: 100px;\n  border: @border-base;\n  border-radius: @border-radius-base;\n  color: @border-color-base;\n  margin: 0 5px 5px 0;\n  transition: all .3s;\n\n  &:hover {\n    border-color: @input-hover-border-color;\n    color: @info-color;\n  }\n\n  .file-icon {\n    width: 50px;\n    height: 50px;\n  }\n}\n\n.remove {\n  color: @error-color;\n}\n\n.replace {\n  color: @primary-color;\n}\n</style>\n\n<style lang=\"less\">\n.system-media-dialog {\n  .ant-modal {\n    max-width: 848px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FilePicker.vue?vue&type=template&id=03e2356c&scoped=true&\"\nimport script from \"./FilePicker.vue?vue&type=script&lang=js&\"\nexport * from \"./FilePicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FilePicker.vue?vue&type=style&index=0&id=03e2356c&scoped=true&lang=less&\"\nimport style1 from \"./FilePicker.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03e2356c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=0&id=03e2356c&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=0&id=03e2356c&scoped=true&lang=less&\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePicker.vue?vue&type=style&index=1&lang=less&\""],"sourceRoot":""}