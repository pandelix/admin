(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c1c38e6"],{"6d97":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file-picker"},[a("div",{staticClass:"file-wrapper"},[t._l(t.arrayValue,(function(e,i){return a("file-preview",{key:i,staticClass:"preview file-item",attrs:{file:e}},[a("a-icon",{staticClass:"replace",attrs:{type:"sync",title:"替换"},on:{click:function(e){return e.stopPropagation(),t.onReplace(i)}}}),a("lz-popconfirm",{attrs:{title:"确认移除？",confirm:function(){return t.remove(i)}}},[a("a-icon",{staticClass:"remove",attrs:{type:"delete",title:"移除"}})],1)],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMax,expression:"!isMax"}],staticClass:"picker file-item flex-box",on:{click:t.onPick}},[a("svg-icon",{staticClass:"file-icon",attrs:{"icon-class":t.pickerIcon}})],1)],2),a("a-modal",{attrs:{title:t.title,width:"90%",footer:null,"wrap-class-name":"system-media-dialog"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("system-media",{ref:"media",attrs:{"default-multiple":t.mediaMultiple,"default-ext":t.ext},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("a-button",{attrs:{type:"primary",disabled:!e.anySelected},on:{click:function(a){return t.onPickConfirm(e.selected)}}},[t._v(" 选定 ")])]}}])})],1)],1)},r=[],n=(a("99af"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("ddb0"),a("2909")),s=a("5530"),o=a("8a59"),l=a("2847"),c=a("2593"),u=a.n(c),f=a("1028"),m={name:"FilePicker",components:{LzPopconfirm:f["a"],FilePreview:l["a"],SystemMedia:o["a"]},inject:{lzFormItem:{default:null}},data:function(){return{dialog:!1,formattedValue:null,pickIndex:-1}},props:{multiple:Boolean,max:{type:[String,Number],default:8},title:{type:String,default:function(){var t;return(null===(t=this.lzFormItem)||void 0===t?void 0:t.label)||"选择文件"}},value:null,ext:String,valueFields:{type:String,default:"path"},flatValue:{type:Boolean,default:!0}},computed:{pickerIcon:function(){return this.multiple?"multi-file":"single-file"},canPick:function(){return!this.isMax||this.isReplace},isMax:function(){return this.multiple&&this.value.length>=this.max||!this.multiple&&this.value},isReplace:function(){return-1!==this.pickIndex},miniWidth:function(){return this.$store.state.miniWidth},arrayValue:function(){return this.value?Array.isArray(this.value)?this.value:[this.value]:[]},mediaMultiple:function(){return!this.isReplace&&this.multiple}},methods:{onPick:function(){this.canPick&&(this.dialog=!0)},onPickConfirm:function(t){var e;t=t.map(this.formatReturn),this.multiple?this.isReplace?(e=this.value,e[this.pickIndex]=t[0]):e=this.value.concat(t.slice(0,this.max-this.value.length)):e=t[0],this.$emit("input",e),this.$refs.media.clearSelected(),this.dialog=!1},formatReturn:function(t){var e=this.valueFields?this.valueFields.split(","):[];return 0===e.length?t=Object(s["a"])({},t):(e.push("path"),t=u()(t,e)),e=Object(n["a"])(new Set(e)),this.flatValue&&1===e.length?t[e[0]]:t},remove:function(t){this.multiple?this.value.splice(t,1):this.$emit("input",null)},onReplace:function(t){this.pickIndex=t,this.onPick()}},watch:{dialog:function(t){t||(this.pickIndex=-1)}}},p=m,d=(a("77f6"),a("daf7"),a("2877")),h=Object(d["a"])(p,i,r,!1,null,"03e2356c",null);e["a"]=h.exports},"77f6":function(t,e,a){"use strict";var i=a("cae9"),r=a.n(i);r.a},a41d:function(t,e,a){},cae9:function(t,e,a){},daf7:function(t,e,a){"use strict";var i=a("a41d"),r=a.n(i);r.a},fbdf:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-content",{attrs:{center:""}},[a("lz-form",{ref:"form",attrs:{"get-data":t.getData,submit:t.onSubmit,errors:t.errors,form:t.form,"disable-stay":"","disable-redirect":"","edit-mode":""},on:{"update:errors":function(e){t.errors=e},"update:form":function(e){t.form=e}}},[a("lz-form-item",{attrs:{label:"帐号"}},[a("a-input",{attrs:{value:t.profile.username,"read-only":""}})],1),a("lz-form-item",{attrs:{label:"姓名",required:"",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("lz-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("file-picker",{attrs:{ext:"jpg,gif,png,jpeg"},model:{value:t.form.avatar,callback:function(e){t.$set(t.form,"avatar",e)},expression:"form.avatar"}})],1),a("lz-form-item",{attrs:{label:"密码",prop:"password"}},[a("a-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("lz-form-item",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("a-input",{attrs:{type:"password"},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}})],1),a("lz-form-item",{attrs:{label:"角色"}},t._l(t.profile.roles,(function(e){return a("a-tag",{key:e,attrs:{color:"blue"}},[t._v(t._s(e))])})),1),a("lz-form-item",{attrs:{label:"权限"}},t._l(t.profile.permissions,(function(e){return a("a-tag",{key:e,attrs:{color:"blue"}},[t._v(t._s(e))])})),1)],1)],1)},r=[],n=(a("96cf"),a("1da1")),s=a("44c4"),o=a("04bc"),l=a("d99d"),c=a("33c7"),u=a("6d97"),f={components:{FilePicker:u["a"],PageContent:c["a"],LzForm:o["a"],LzFormItem:l["a"]},data:function(){return{form:{name:"",avatar:"",password:"",password_confirmation:""},profile:{},errors:{}}},methods:{getData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["d"])();case 2:return a=e.sent,i=a.data,t.profile=i,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["i"])(t.form);case 2:a=e.sent,i=a.data,t.$store.commit("SET_USER",i),t.form=Object.assign({},t.form,{password:"",password_confirmation:""});case 6:case"end":return e.stop()}}),e)})))()}}},m=f,p=a("2877"),d=Object(p["a"])(m,i,r,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-7c1c38e6.70bb8d3b.js.map